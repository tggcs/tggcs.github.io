---
layout: post
title: "åœ¨çº¿è¡¨æ ¼é¡¹ç›®å¼€å‘"
date: 2022-12-01 01:26:35 +0800
categories: project
tags:
  - é¡¹ç›®å·¥ç¨‹å®è·µ
  - åœ¨çº¿è¡¨æ ¼
  - åœ¨çº¿excel
  - spreadsheet
  - å‰ç«¯
  - js
---

- å•ä¸€èŒè´£åŸåˆ™ S
- å¼€å‘-å°é—­åŸåˆ™ O
- é‡Œæ°æ›¿æ¢åŸåˆ™ L
- æ¥å£éš”ç¦»åŸåˆ™ I
- ä¾èµ–å€’ç½®åŸåˆ™ D

books
- head first
- å¤§è¯è®¾è®¡æ¨¡å¼
- jsè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ
- https://www.patterns.dev/posts/introduction/

<tg-tit>N. è®¾è®¡åŸåˆ™</tg-tit> 

## å•ä¸€èŒè´£åŸåˆ™ Single Responsibility Principle(SRP)

å°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚ä¸€ä¸ªå¯¹è±¡ï¼ˆæ–¹æ³•ï¼‰åªåšä¸€ä»¶äº‹æƒ…(js)ã€‚

### åº”ç”¨

å‚è€ƒ è¿­ä»£å™¨æ¨¡å¼

ğŸ˜” å¾ªç¯å’Œå…·ä½“é€»è¾‘åœ¨ä¸€èµ·
```js
var appendDiv = function (data) {
  for (var i = 0, l = data.length; i < l; i++) {
    var div = document.createElement('div');
    div.innerHTML = data[i];
    document.body.appendChild(div);
  }
};
appendDiv([1, 2, 3, 4, 5, 6]); 
```

ğŸ˜„ å¾ªç¯å’Œå…·ä½“é€»è¾‘åˆ†å¼€
```js
var each = function (obj, callback) {
  var value,
    i = 0,
    length = obj.length,
    isArray = isArraylike(obj); // isArraylike å‡½æ•°æœªå®ç°ï¼Œå¯ä»¥ç¿»é˜… jQuery æºä»£ç 
  if (isArray) { // è¿­ä»£ç±»æ•°ç»„
    for (; i < length; i++) {
      callback.call(obj[i], i, obj[i]);
    }
  } else {
    for (i in obj) { // è¿­ä»£ object å¯¹è±¡
      value = callback.call(obj[i], i, obj[i]);
    }
  }
  return obj;
};
var appendDiv = function (data) {
  each(data, function (i, n) {
    var div = document.createElement('div');
    div.innerHTML = n;
    document.body.appendChild(div);
  });
};
appendDiv([1, 2, 3, 4, 5, 6]);
appendDiv({ a: 1, b: 2, c: 3, d: 4 });
```
### è¿å SRP åŸåˆ™

åœ¨æ–¹ä¾¿æ€§ä¸ç¨³å®šæ€§ä¹‹é—´è¦æœ‰ä¸€äº›å–èˆã€‚å…·ä½“æ˜¯é€‰æ‹©æ–¹ä¾¿æ€§è¿˜æ˜¯ç¨³å®šæ€§ï¼Œå¹¶æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œè€Œæ˜¯è¦å–å†³äºå…·ä½“çš„åº”ç”¨ç¯å¢ƒã€‚

### SRP åŸåˆ™çš„ä¼˜ç¼ºç‚¹

ä¼˜ï¼šé™ä½äº†å•ä¸ªç±»æˆ–è€…å¯¹è±¡çš„å¤æ‚åº¦

ç¼ºï¼šå¢åŠ ç¼–å†™ä»£ç çš„å¤æ‚åº¦

## å¼€å‘-å°é—­åŸåˆ™ Open Closed principle(OCP)

å¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­

### æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„

åœ¨æœ€åˆç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå…ˆå‡è®¾å˜åŒ–æ°¸è¿œä¸ä¼šå‘ç”Ÿï¼Œè¿™æœ‰åˆ©äºæˆ‘ä»¬è¿…é€Ÿå®Œæˆéœ€æ±‚ã€‚å½“å˜åŒ–å‘ç”Ÿå¹¶ä¸”å¯¹æˆ‘ä»¬æ¥ä¸‹æ¥çš„å·¥ä½œé€ æˆå½±å“çš„æ—¶å€™ï¼Œå¯ä»¥å†å›è¿‡å¤´æ¥å°è£…è¿™äº›å˜åŒ–çš„åœ°æ–¹ã€‚

## é‡Œæ°æ›¿æ¢åŸåˆ™ Liskov Substitution principle (LSP)

### å®šä¹‰

` that objects of a superclass should be replaceable with objects of its subclasses without breaking the application`

- å­ç±»&çˆ¶ç±» è¡Œä¸ºè¦ä¸€è‡´~ï¼ˆæ‰€ä»¥ï¼Œè®©æ­£æ–¹å½¢ç»§æ‰¿é•¿æ–¹å½¢ï¼Œéƒ½å®ç°çš„é¢ç§¯è®¡ç®—å°±æ˜¯å¯èƒ½ä¼šå†²çªçš„ï¼‰

### å‚è€ƒ

- [SOLID Design Principles Explained: The Liskov Substitution Principle with Code Examples](https://stackify.com/solid-design-liskov-substitution-principle/)
- [What Is Liskov Substitution Principle (LSP)? With Real World Examples!](https://blog.knoldus.com/what-is-liskov-substitution-principle-lsp-with-real-world-examples/)

## æ¥å£éš”ç¦»åŸåˆ™ Interface Segregation principleï¼ˆISPï¼‰

js é‡Œç”¨ä¸åˆ°;

**_Clients should not be forced to depend upon interfaces that they do not use_**

å°±æ˜¯å°†æ¥å£æŒ‰ä¸šåŠ¡åŠŸèƒ½éœ€è¦ï¼Œæ‹†åˆ†å¤šä¸ªå°çš„æ¥å£ç»„åˆä½¿ç”¨

### å‚è€ƒ

1. [SOLID Design Principles Explained: Interface Segregation with Code Examples](https://stackify.com/interface-segregation-principle/)

## ä¾èµ–å€’ç½®åŸåˆ™ Dependency Inversion Principle(DIP)

1. é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡
2. æŠ½è±¡æ¨¡å—ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ã€‚ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡

ğŸ˜” å†åŠ MongoDBï¼Œéœ€è¦å¼•å…¥if-else
```php
<?php 

class BudgetReport {
    public $database;

    public function __construct($database)
    {
        $this->database = $database;
    }

    public function open(){
        $this->database->get();
    }

    public function save(){
        $this->database->insert();
    }
}

class MySQLDatabase {
    // fields

    public function get(){
        // get by id
    }

    public function insert(){
        // inserts into db
    }

    public function update(){
        // update some values in db
    }

    public function delete(){
        // delete some records in db
    }
}

// Client
$database = new MySQLDatabase();
$report = new BudgetReport($database);

$report->open();
```

ğŸ˜„ éƒ½ä¾èµ–`DatabaseInterface`æŠ½è±¡ï¼ŒBudgetReportä¸ç”¨æ›´æ”¹
```php
interface DatabaseInterface {
    public function get();
    public function insert();
    public function update();
    public function delete();
}

class MySQLDatabase implements DatabaseInterface {
    // fields

    public function get(){
        // get by id
    }

    public function insert(){
        // inserts into db
    }

    public function update(){
        // update some values in db
    }

    public function delete(){
        // delete some records in db
    }
}

class MongoDB implements DatabaseInterface {
    // fields

    public function get(){
        // get by id
    }

    public function insert(){
        // inserts into db
    }

    public function update(){
        // update some values in db
    }

    public function delete(){
        // delete some records in db
    }
}

class BudgetReport {
    public $database;

    public function __construct(DatabaseInterface $database)
    {
        $this->database = $database;
    }

    public function open(){
        $this->database->get();
    }

    public function save(){
        $this->database->insert();
    }
}

// Client
$mysql = new MySQLDatabase();
$report_mysql = new BudgetReport($mysql);

$report_mysql->open();

$mongo = new MongoDB();
$report_mongo = new BudgetReport($mongo);

$report_mongo->open();
```
### å‚è€ƒ

- [Understanding SOLID Principles: Dependency Inversion](https://dev.to/tamerlang/understanding-solid-principles-dependency-inversion-1b0f)



 